{% extends "base.html" %}
{% block content %}
  <div class="page-header text-center">
    <h1>Karaoke con Letra Manual</h1>
    <p class="lead">Proporciona a letra da canción</p>
  </div>

  <div class="row">
    <div class="col-lg-10 offset-lg-1">
      <div class="feature-card">        <div class="card-header">
          <h2><i class="fas fa-sync-alt"></i> Sincronización de Letra</h2>
        </div>
        <div class="card-body">
          <form action="/process_manual_lyrics" method="post" enctype="multipart/form-data">
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="youtube_url" class="form-label"><i class="fab fa-youtube"></i> URL de YouTube</label>
                  <input
                    type="text"
                    class="form-control"
                    id="youtube_url"
                    name="youtube_url"
                    placeholder="https://www.youtube.com/watch?v=..."
                  >
                </div>
                
                <p class="text-center my-2">- ou -</p>
                
                <div class="mb-3">
                  <label for="video_file" class="form-label"><i class="fas fa-file-video"></i> Subir vídeo MP4</label>
                  <input
                    type="file"
                    class="form-control"
                    id="video_file"
                    name="video_file"
                    accept=".mp4"
                  >
                  <div class="file-info mt-2" style="display: none;"></div>
                </div>
              </div>
              
              <div class="col-md-6">
                <div class="mb-3 h-100">
                  <label for="manual_lyrics" class="form-label"><i class="fas fa-align-left"></i> Letra Completa</label>
                  <textarea
                    class="form-control h-75"
                    id="manual_lyrics"
                    name="manual_lyrics"
                    placeholder="Pega aquí a letra completa da canción..."
                    required
                  ></textarea>
                </div>
              </div>
            </div>
            
           
            <div class="row mt-3">
              <div class="col-12">
                <div class="mb-3">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="enable_diarization_manual" name="enable_diarization" value="true">
                    <label class="form-check-label" for="enable_diarization_manual">
                      <i class="fas fa-users"></i> Diferenciación de voces (Speaker Diarization)
                    </label>
                  </div>
                  <small class="form-text text-muted">
                    Detectar distintos cantantes e colorealos de forma diferente
                  </small>
                </div>
                
                <div class="mb-3" id="hf_token_group_manual" style="display: none;">
                  <label for="hf_token_manual" class="form-label">
                    <i class="fab fa-github"></i> Token HuggingFace (requerido para diarization)
                  </label>
                  <input
                    type="password"
                    class="form-control"
                    id="hf_token_manual"
                    name="hf_token"
                    placeholder="hf_..."
                  >
                  <small class="form-text text-muted">
                    Obtén o token en <a href="https://huggingface.co/settings/tokens" target="_blank">huggingface.co/settings/tokens</a>
                  </small>
                </div>
              </div>
            </div>
            
            <div class="row mt-3">
              <div class="col-12">
                <div class="alert alert-info">
                  <i class="fas fa-info-circle"></i> <strong>¿Como funciona?</strong> O sistema sincronizará automáticamente cada palabra da letra co audio da canción utilizando "Forced Alignment".
                </div>
              </div>
            </div>
            
            <div class="text-center mt-3">
              <button type="submit" class="btn btn-primary btn-lg">
                <i class="fas fa-magic"></i> Crear Vídeo de Karaoke
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="divider"></div>

  <div class="row">
    <div class="col text-center">
      <a href="/" class="btn btn-outline-light"><i class="fas fa-arrow-left"></i> Volver ao Inicio</a>
    </div>
  </div>

{% endblock %}
